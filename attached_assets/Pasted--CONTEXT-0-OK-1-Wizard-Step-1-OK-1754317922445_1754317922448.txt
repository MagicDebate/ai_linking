# CONTEXT  
Шаг 0 (авторизация) – OK  
Шаг 1 (экран «Мои проекты» + Wizard Step 1 “Основное”) – OK  
Шаг 2-a (Источник CSV / WP) – OK  
Шаг 2-b (CSV-маппинг) – OK  

Теперь нужен **Step 3 “Запуск генерации”**:  
▪ выбираем сценарии (быстрые кнопки)  
▪ тут же задаём «масштаб» (какие страницы трогать) – **БЕЗ отдельной модалки**  
▪ «Расширенные настройки» прячем в accordion

────────────────────────────────────────────────────────────
UI – Wizard  Step 3 (ширина ≈ 600 px, прокрутка внутри)

1️⃣  **Что хотим улучшить?**  *(checkbox cards, min 1)*  
   [ ] 🔄  Быстрая индексация нового   — data-scenario="freshness"  
   [ ] ⭐  Усилить главный гайд        — "hub_boost"  
   [ ] 💰  Перелить трафик на money    — "commercial"  
   [ ] 🛟  Спасти сироты / глубокие    — "orphan_depth"  
   [ ] 🧩  Связать статьи внутри темы  — "crosslink"

2️⃣  **Какие страницы обрабатывать?**  *(radio + раскрывающийся подблок)*  
   (•)  Весь проект  
   (  )  Уточнить выбор  
        ▾ раскрывается, если выбран второй radio:  
           • Поле «URL-подпуть»          (placeholder `/blog/`)  
           • «Опубликованы после»        date-picker  
           • «Случайная выборка, %»      slider 5–100 (default 100)  
           • Textarea «Список URL вручную» (по одному в строке)  
           • Под таблицей live-preview: «Будет обработано: 237 страниц»  
           (prev-count берём из stub-функции /api/scope/preview, можно random)

3️⃣  **Расширенные настройки** *(accordion закрыт)*  
     – вложить прежнюю форму (лимиты, стоп-фразы, политика 404, Depth Lift,
       Freshness-Push параметры)  
     – если пользователь accordion не раскрыл, на бэк летят значения preset’а
       для выбранных сценариев.

Button-bar →  ‹ Назад | **Запустить генерацию**  
• disabled, пока не выбран хотя бы один сценарий.

────────────────────────────────────────────────────────────
BACK-END STUB  (допиши к mini-server)

GET  /api/scope/preview  
     query: { projectId, prefix?, dateAfter?, sample? }  
     → { pages: randomInt(50-300) }

POST /api/generate  
     body: {
       projectId,
       scenarios: ["freshness","hub_boost",…],
       scope: {
         fullProject: true | false,
         includePrefix: "/blog/",
         dateAfter: "2025-07-01",
         samplePercent: 30,
         manualList: []
       },
       advanced: { … если accordion открыт … }
     }
     → { ok:true, runId }

Генерация = dummy setTimeout 3 s, статус run = queued → complete.

────────────────────────────────────────────────────────────
ACCEPTANCE

✔ Step 3 показывает карточки сценариев и радио «Весь проект / Уточнить».  
✔ При выборе «Уточнить» раскрывается подблок, preview-count обновляется
  (fetch /preview).  
✔ «Запустить» активна, когда выбран ≥ 1 сценарий.  
✔ Нажатие → POST /api/generate (payload содержит scope / scenarios) → wizard
  закрывается, пользователь видит экран «Импорт / Прогресс» с новым Run-ID.  
✔ Accordion «Расширенные» можно раскрыть; изменённые лимиты попадают в
  advanced-поля payload.  
✔ Lighthouse a11y ≥ 90; карточки и радио управляются с клавиатуры.